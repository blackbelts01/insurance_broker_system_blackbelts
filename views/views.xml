<odoo>
    <data>
        <!---edit opportuinty-->


        <!--<record model="ir.ui.view" id="crm__lead_form_view_sale">-->
            <!--<field name="model">crm.lead</field>-->
            <!--<field name="inherit_id" ref="sale_crm.crm_case_form_view_oppor"/>-->
            <!--<field name="arch" type="xml">-->
                <!--<xpath expr="//button[@name='384']" position="attributes">-->
                    <!--<attribute name="invisible">1</attribute>-->
                <!--</xpath>-->
                <!--<xpath expr="//button[@name='385']" position="attributes">-->
                    <!--<attribute name="invisible">1</attribute>-->
                <!--</xpath>-->
            <!--</field>-->
        <!--</record>-->

        <record model="ir.ui.view" id="crm__lead_form_view">
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">

                <header>
                    <button name="create_policy" string="Convert Policy" class="oe_highlight" type="object" attrs="{'invisible': ['|', ('active','=',False), ('probability', '!=', 100)]}"/>
                    <button name="print_opp" string="Print" type="object"  class="btn-primary o_sale_print" />
                    <button name="send_mail_template" string="Send by Mail" type="object"  class="oe_highlight" />
                </header>
                <notebook >

                    <page string="Underwritting/Survey">
                        <label for="my_notes"/>
                        <field name="my_notes" />

                    </page>
                </notebook>

                <!-- crm main form -->
                <field name="partner_id" position="attributes" >
                    <attribute name="context">{'own_customer_only':1}</attribute>
                </field>
                <xpath expr="//field[@name='name']" position="after">
                    <group>
                        <div class="o_row">
                            <label for="c_type" style="font-weight:bold"/>
                            <div class="o_row" style="width: 40% !important;">
                                <field name="c_type"  style="width:20%; font-size: 15px"/>
                                <field name="ammount" style="width:100px; font-size: 15px"/>
                            </div>
                            <label for="policy_number" style="font-weight:bold" attrs="{'invisible': ['|', ('active','=',False), ('probability', '!=', 100)]}"/>
                            <div class="o_row" style="width: 47% !important;" attrs="{'invisible': ['|', ('active','=',False), ('probability', '!=', 100)]}" >
                                <field name="policy_number"  style="width:20%; font-size: 15px"/>
                                <!--<field name="ammount" style="width:100px; font-size: 15px"/>-->
                            </div>


                        </div>
                    </group>
                </xpath>

                <!--<field name="user_id" position="attributes">-->
                <!--<attribute name="context">{'filter_own_user': True}</attribute>-->
                <!--</field>-->


                <!--new policy-->

                <field name="date_deadline" position="after">
                    <field name="oppor_type"/>
                    <field name="create_uid" readonly='True'/>
                    <field name="selected_coverage"  />
                </field>
                <field name="team_id" position="after">
                    <field name="test1"  invisible="1" />

                    <field name="insurance_type" />
                    <field name="LOB"   />
                </field>
                <field name="tag_ids" position="after">
                    <field name="policy_number"   />
                    <field name="ins_type"/>

                    <!--<td></td>-->
                    <!--<div class="o_row">-->
                    <!--&lt;!&ndash;<label string="Term"/>&ndash;&gt;-->
                    <!--<label string="duration"/>-->
                    <!--<field name="duration_no"/>-->
                    <!--<label string="type"/>-->
                    <!--<field name="duration_type"/>-->
                    <!--</div>-->


                    <label string="Duration"/>
                    <div class="o_row">
                        <field name="duration_no"/>
                        <field name="duration_type"/>
                    </div>

                </field>




                <xpath expr="/form/sheet/group[1]" position="after" >
                    <field name="test" style="width:20%; font-size: 15px"  invisible="1"  />
                    <!--<group string="Insured"  attrs="{'invisible': ['|',('test', '=', False)]}">-->

                    <!--<group attrs="{'invisible': ['|',('ins_type', '!=', 'Group')]}">-->

                    <!--<field name="group" />-->
                    <!--</group>-->

                    <!--<group >-->
                    <!--<button name="Insured_button" string="Add Risk Details" class="oe_highlight" type="object" attrs="{'invisible': [('active','=',False)]}"/>-->
                    <!--</group>-->
                    <label string="Insured" style="font-size: 30px; color:#2e70b8 " attrs="{'invisible': ['|',('test', '=', False)]}" ></label>
                    <field name="objectrisks" attrs="{'invisible': ['|',('test', '=', False)]}" >
                        <tree>
                            <!--<field name="risk"/>-->
                            <field name="risk_description"/>
                        </tree>
                        <form>
                            <group>
                                <!--<field name="risk"/>-->
                                <field name="risk_description" invisible="1"/>
                                <field name="risks_crm" invisible="1"/>
                                <field name="type_risk" invisible="1"/>

                            </group>

                            <group string="Vehicle" attrs="{'invisible': ['|',('type_risk', '!=', 'vehicle')]}" >
                                <field name="car_tybe" widget="selection"/>
                                <field name="Man" widget="selection"/>
                                <field name="model" widget="selection"/>
                                <field name="motor_cc"/>
                                <field name="year_of_made"/>
                                <field name="plate_no"/>
                                <field name="chassis_no"/>
                                <field name="engine"/>
                            </group>
                            <group string="Person" attrs="{'invisible': ['|',('type_risk', '!=', 'person')]}">
                                <field name="name"/>
                                <field name="DOB"/>
                                <field name="job" widget="selection"/>
                            </group>
                            <group string="Cargo"  attrs="{'invisible': ['|',('type_risk', '!=', 'cargo')]}">
                                <field name="From"  />
                                <field name="To"  />
                                <field name="cargo_type" />
                                <field name="weight"   />
                            </group>
                            <group string="Location"  attrs="{'invisible': ['|',('type_risk', '!=', 'location')]}">
                                <field name="address"  />
                                <field name="type"  />
                            </group>


                        </form>
                    </field>
                    <label string="Proposals" style="font-size: 30px; color:#2e70b8 " attrs="{'invisible': ['|',('test', '=', False)]}" ></label>
                    <field name="proposal_opp"  attrs="{'invisible': ['|',('test', '=', False)]}" >
                        <tree>
                            <field name="Company"/>
                            <field name="product_pol"/>
                            <field name="proposal_desc"/>
                            <field name="premium"/>
                        </tree>
                    </field>
                    <field name="set_covers" invisible="1"/>
                    <button name="covers_button" string="Validate" class="oe_highlight" type="object"  attrs="{'invisible': ['|',('test', '=', False)]}"/><br/>
                    <label string="Proposal Lines" style="font-size: 30px; color:#2e70b8 " attrs="{'invisible': ['|',('test', '=', False)]}" ></label>
                    <field name="coverage_line"  attrs="{'invisible': ['|',('set_covers', '=', False)]}">

                        <tree editable="bottom">
                            <field name="proposal_id"  style="color:#2e70b8 ;"/>
                            <field name="insurer" invisible="1"/>
                            <field name="product" invisible="1"/>
                            <field name="risk_id_covers" options="{'no_create': True, 'no_open': True}"/>
                            <field name="covers" options="{'no_create': True, 'no_open': True}"/>
                            <!--<field name="risk_desc"/>-->
                            <field name="check" invisible="1"/>
                            <field name="sum_insured" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>
                            <field name="rate" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>
                            <field name="net_premium" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>
                            <field name="limitone" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>
                            <field name="limittotal" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>
                            <field name="deductible" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>

                        </tree>
                        <!--<form>-->
                        <!--<group>-->
                        <!--<field name="proposal_id"/>-->
                        <!--<field name="risk_id_covers"/>-->
                        <!--<field name="risk_desc"/>-->
                        <!--<field name="covers"/>-->
                        <!--<field name="covers_crm" invisible="1"  />-->

                        <!--</group>-->
                        <!--</form>-->
                    </field>


                </xpath>

                <!--<xpath expr="/form/sheet/group[1]" position="after">-->
                <!--<field name="test" style="width:20%; font-size: 15px"  invisible="1"  />-->
                <!--<group string="Proposals"  attrs="{'invisible': ['|',('test', '=', False)]}">-->
                <!--<group attrs="{'invisible': ['|',('ins_type', '!=', 'Group')]}">-->

                <!--<field name="group" />-->
                <!--</group>-->


                <!--<field name="proposal_opp" >-->
                <!--<tree>-->

                <!--&lt;!&ndash;<field name="proposal_id"/>&ndash;&gt;-->
                <!--<field name="Company"/>-->
                <!--<field name="product_pol"/>-->
                <!--<field name="proposal_desc"/>-->


                <!--<field name="premium"/>-->
                <!--</tree>-->
                <!--</field>-->

                <!--</group>-->

                <!--</xpath>-->

                <!--<xpath expr="/form/sheet/group[2]" position="after">-->
                <!--<button name="covers_button" string="Validate" class="oe_highlight" type="object"  attrs="{'invisible': ['|',('test', '=', False)]}"/>-->

                <!--<field name="set_covers" invisible="1"/>-->
                <!--<field name="id" invisible="1"/>-->
                <!--<group string="Proposal lines"   >-->
                <!--</group>-->

                <!--<field name="coverage_line"  attrs="{'invisible': ['|',('set_covers', '=', False)]}">-->

                <!--<tree editable="bottom">-->
                <!--<field name="proposal_id"  style="color:Blue;"/>-->
                <!--<field name="insurer" invisible="1"/>-->
                <!--<field name="product" invisible="1"/>-->
                <!--<field name="risk_id_covers" options="{'no_create': True, 'no_open': True}"/>-->
                <!--&lt;!&ndash;<field name="risk_desc"/>&ndash;&gt;-->
                <!--<field name="check" invisible="1"/>-->
                <!--<field name="sum_insured" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->
                <!--<field name="rate" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->
                <!--<field name="net_premium" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->
                <!--<field name="limitone" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->
                <!--<field name="limittotal" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->
                <!--<field name="deductible" attrs="{'readonly': [('check', '=', True)]}" force_save="1"/>-->

                <!--</tree>-->
                <!--&lt;!&ndash;<form>&ndash;&gt;-->
                <!--&lt;!&ndash;<group>&ndash;&gt;-->
                <!--&lt;!&ndash;<field name="proposal_id"/>&ndash;&gt;-->
                <!--&lt;!&ndash;<field name="risk_id_covers"/>&ndash;&gt;-->
                <!--&lt;!&ndash;<field name="risk_desc"/>&ndash;&gt;-->
                <!--&lt;!&ndash;<field name="covers"/>&ndash;&gt;-->
                <!--&lt;!&ndash;<field name="covers_crm" invisible="1"  />&ndash;&gt;-->

                <!--&lt;!&ndash;</group>&ndash;&gt;-->
                <!--&lt;!&ndash;</form>&ndash;&gt;-->
                <!--</field>-->


                <!--</xpath>-->

            </field>
        </record>









        <!--1111111-->

        <!---create opportuinty-->
        <record model="ir.ui.view" id="crm__lead_form_create_view">
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_create_opportunity_simplified"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">
                    <label for="c_type"/>
                    <div class="o_row" >
                        <field name="c_type"  style="width:30%%;"/>
                        <field name="ammount" style="font-size: 15px"/>
                    </div>

                    <field name="insurance_type"  style="width:30%%;"/>
                </xpath>
            </field>
        </record>

        <!-- search view -->
        <record id="view_crm_order_inherit_search" model="ir.ui.view">
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="context">{"search_default_unassigned":1}</field>
            <field name="arch" type="xml">

                <xpath expr="//filter[@name='assigned_to_me']"  position="attributes">
                    <attribute name="string">Assigned to me</attribute>
                    <attribute name="domain">[('user_id', '=', uid ),('create_uid','!=', uid)]</attribute>
                </xpath>

                <xpath expr="//filter[@name='unassigned']"  position="attributes">
                    <attribute name="string">Dispatched By me</attribute>
                    <attribute name="domain">[('create_uid','=', uid),('user_id', '!=', uid )] </attribute>
                    <!-- <filter string="Network" name="network" domain="[('create_uid','=', uid),('user_id', '!=', uid ) ]"/> -->
                </xpath>
                <xpath expr="//filter[@name='unassigned']"  position="after">

                    <filter string="Owned by me" name="own" domain="[('create_uid','=', uid),('user_id', '=', uid )]"/>

                </xpath>


            </field>
        </record>

        <!-- Adding user form -->

        <!--
                <record model="ir.ui.view" id="res_user_create_county_view">
                    <field name="model">res.users</field>
                    <field name="inherit_id" ref="base.view_users_form"/>
                    <field name="arch" type="xml">


                        &lt;!&ndash;  <xpath expr="//field[@name='name']" position="before"> &ndash;&gt;
                        <label for="name" position="before">
                            <div style="width:50%%;">
                                <label for="firstname" />
                                <field name="firstname" />
                            </div>
                            <div style="width:50%%;">
                                <label for="lastname"/>
                                <field name="lastname" />
                            </div>

                            <div >
                                <field name="space"/>
                                <field name="space"/>
                            </div>

                            <div class="o_row" style="width:70% !important;"  >
                                <label for="country"/>
                                <field name="country"/>
                                <label for="agency"/>
                                <field name="agency"/>
                            </div>
                            <div  style="width:40%%;">
                                <label for="userid"/>
                                <field name="userid" readonly="True"/>
                            </div>

                        </label>

                    </field>
                </record>
        -->

        <record id="ibs_crm_case_tree_view_oppor" model="ir.ui.view">
            <field name="name">crm.lead.tree.opportunity</field>
            <field name="model">crm.lead</field>
            <field name="arch" type="xml">
                <tree string="Opportunities" decoration-bf="message_needaction==True" decoration-muted="probability == 100" decoration-danger="activity_date_deadline and (activity_date_deadline &lt; current_date)">
                    <field name="insurance_type" string="Type"/>
                    <field name="LOB" string="LOB"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="name" string="Opportunity"/>
                    <field name="term"/>
                    <field name="planned_revenue" sum="Expected Revenues" string="Expected Premium"/>
                    <field name="probability" avg="Avg. of Probability"/>
                    <field name="stage_id"/>
                    <field name="activity_date_deadline" invisible="1"/>
                    <field name="activity_summary" invisible="1"/>
                    <field name="medium_id" invisible="1"/>
                    <field name="campaign_id" invisible="1"/>
                    <field name="source_id" invisible="1"/>
                    <field name="team_id"/>
                    <field name="user_id"/>
                    <field name="referred" invisible="1"/>
                    <field name="priority" invisible="1"/>
                    <field name="message_needaction" invisible="1"/>
                    <field name="probability" invisible="1"/>
                    <field name="write_date" invisible="1"/>
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities">
            <field name="name">Opportunities</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">kanban,tree,graph,pivot,form,calendar</field>
            <field name="domain">[('type','=','opportunity')]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid
                }
            </field>
        </record>
        <record model="ir.actions.act_window.view" id="action_ibs_crm_lead_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="ibs_crm_case_tree_view_oppor"/>
            <field name="act_window_id" ref="ibs_crm_lead_opportunities"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_ibs_crm_lead_form">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="crm__lead_form_view"/>
            <field name="act_window_id" ref="ibs_crm_lead_opportunities"/>
        </record>

    </data>
</odoo>